<!-- Date Picker -->
<div class="date-picker-container">
  <label for="datePicker">Select a Date:</label>
  <input type="date" id="datePicker">
  <button onclick="navigateToDate()">Go</button>
</div>

<!-- Header -->
<header class="masthead">
  <div class="header-content">
    <div class="title-container">
      <h1 class="today-in-history">Today in History</h1>
      <h3 class="subtitle">Historical Events</h3>
    </div>
    <div class="date-container" onclick="navigateToToday()">
      <div class="date-box">
        <h2 class="date-number">{{ "now" | date: "%d" }}</h2>
        <h2 class="date-month">{{ "now" | date: "%B" }}</h2>
      </div>
    </div>
  </div>
</header>
<!-- Events Section -->
<section>
  <div class="events-grid">
    {% assign today = "now" | date: "%B %-d" %}
    {% assign todays_events = "" | split: "" %}

    {% for month in site.portfolio %}
      {% assign filtered_days = month.days | where: "date", today %}
      {% for day in filtered_days %}
        {% assign todays_events = todays_events | push: day %}
      {% endfor %}
    {% endfor %}

    {% if todays_events.size > 0 %}
      {% for day in todays_events %}
        {% for year_events in day.years %}
          {% assign year = year_events[0] %}
          {% assign events = year_events[1].events %}

          {% for event in events %}
            <div class="event-item">
              <p class="event-year">{{ year }}</p>
              <p class="event-title">{{ event.title }}</p>
              <p class="event-description">{{ event.description }}</p>
            </div>
          {% endfor %}

        {% endfor %}
      {% endfor %}
    {% else %}
      <p class="no-events">No historical events found for today.</p>
    {% endif %}
  </div>
</section>

<!-- JavaScript -->
<script>
  function navigateToDate() {
    // Get the selected date value
    let selectedDate = document.getElementById("datePicker").value;
  
    // Ensure a date is selected
    if (!selectedDate) {
      alert("Please select a date.");
      return;
    }
  
    // Convert selected date to a Date object (Adjust for timezone issue)
    let dateObj = new Date(selectedDate + "T00:00:00"); // Ensures proper local time handling
  
    // Extract correct month and day
    let month = dateObj.toLocaleString('default', { month: 'long' }); // Full month name
    let day = dateObj.getUTCDate(); // Use UTC to avoid timezone shifting
  
    // Create the URL (e.g., /days/february-1/)
    let url = `/days/${month.toLowerCase()}-${day}/`;
  
    // Redirect to the selected day's page
    window.location.href = url;
  }
  
  function navigateToToday() {
  const currentDate = new Date();
  const month = currentDate.toLocaleString('default', { month: 'long' }).toLowerCase(); // Full month name
  const day = currentDate.getDate();
  
  // Generate the URL for today's date
  const url = `/days/${month}-${day}/`;

  // Redirect to the URL
  window.location.href = url;
}

  </script>
<!-- Styles -->  
<style>
/* General Styles */
/* General Styles */
body {
  font-family: 'Georgia', serif;
  margin: 0;
  padding: 0;
  color: #333;
}

header.masthead {
  text-align: center;
  padding: 20px;
  border-bottom: 2px solid #000;
}

header.masthead h1 {
  font-size: 2.8rem;
  font-weight: bold;
  margin: 0;
}

header.masthead h2 {
  font-size: 2rem;
  margin: 10px 0;
}

header.masthead h3 {
  font-size: 1.4rem;
  margin: 10px 0;
  font-style: italic;
}

/* Date Picker */
.date-box {
  display: flex;
  align-items: center; /* Aligns text vertically */
  gap: 10px; /* Adds spacing between day and month */
}



.date-picker-container {
  display: flex;
  align-items: center;
  gap: 10px;
  justify-content: right;
}

.date-number {
  font-size: 1.8rem;
  font-weight: normal;
}

.date-month {
  font-size: 1.8rem;
  font-weight: normal;
}

.date-container {
  text-align: center;
  cursor: pointer;
}

.date-container:hover {
  color: #0056b3; /* Change text color */
}
/* Events Grid */
.events-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
  margin: 30px auto;
  max-width: 1000px;
  padding: 0 20px;
  line-height: 1.8;
}

.event-item {
  padding: 10px 0;
  border-bottom: none !important;
}

.event-year {
  font-size: 1rem;
  font-weight: bold;
  color: #222;
  margin-bottom: 5px;
}

.event-title {
  font-size: 1.2rem;
  font-weight: bold;
  margin-bottom: 5px;
  color: #333;
}

.event-description {
  font-size: 1rem;
  color: #555;
  margin: 0;
  text-indent: 0;
}

.no-events {
  text-align: center;
  font-size: 1.2rem;
  color: #777;
}
</style>
